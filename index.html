<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!---------------------------   ####     ##      ####             #######   ####     ####      ##      #### ----------------------------->
<!---------------------------  ##  ##   ####      ##                   ##  ##  ##     ##      ####    ##  ##----------------------------->
<!--------------------------- ##        ## ##     ##                  ##   ##   ##    ##      ## ##   ##   ##---------------------------->
<!---------------------------  #####   ##   ##    ##                 ##    ##   ##    ##     ##   ##  ##   ##---------------------------->
<!---------------------------      ##  #######    ##                ##     ##   ##    ##     #######  ##   ##---------------------------->
<!--------------------------- ##   ##  ##   ##    ##               ##      ##   ##    ##     ##   ##  ##   ##---------------------------->
<!---------------------------  #####   ##   ##   ####             #######   #####    ####    ##   ##   #####----------------------------->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->



<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <title>Izao e Jhow</title>
    <link rel="icon" type="image/x-icon" href="images/nois.jpeg">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√° de Casa Nova</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="casanova.css">
</head>

<body>
    <header>
        <div class="header-content">
            <img src="images/nois.jpeg" alt="Nois" class="personal-photo">
            <div class="header-text">
                <h1>Ch√° de Casa Nova</h1>       
            </div>
        </div>

    </header>
    <section class="event-info">
        <div class="event-left">
            <img src="images/convite.png" alt="Convite" class="event-image">
        </div>
        <div class="event-right">
            <p>
                <svg fill="none" height="22" stroke="#000" viewBox="0 -5 24 24" width="18" xmlns="http://www.w3.org/2000/svg">
                    <g stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                        <rect height="18" rx="2" width="20.48" x="1.547" y="3"></rect>
                        <path d="m16.3946 1v5"></path>
                    <path d="m6.15458 1v5"></path>
                    <path d="m1.54663 9.5h20.47997"></path>
                </g></svg> 14/09/2024 - a partir de 13:00
            </p>
            <p>
                <svg fill="none" height="18" stroke="#000" viewBox="0 -5 20 30" width="18" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd" d="m10 7c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-7c-5.514 0-10 4.486-10 10 0 7.449 9.06 13.575 9.445 13.832.168.112.362.168.555.168s.387-.056.555-.168c.385-.257 9.445-6.383 9.445-13.832 0-5.514-4.486-10-10-10z" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
                </svg> Rua Jos√© Alves Teixeira, 206 - Jardim Santa Clara do Lago I, Hortol√¢ndia - SP, 13186-361</p>
            <p>
                <a href="https://www.google.com/maps/place/R.+Jos%C3%A9+Alves+Teixeira,+206+-+Jardim+Santa+Clara+do+Lago+I,+Hortol%C3%A2ndia+-+SP,+13186-361/@-22.8879309,-47.1976772,17z/data=!3m1!4b1!4m6!3m5!1s0x94c8b96d8640225b:0xd7b629f9b177805c!8m2!3d-22.8879309!4d-47.1976772!16s%2Fg%2F11f_j3cfbr?entry=ttu" target="_blank" class="map-link">Ver no mapa</a>
            </p>
            <div class="rsvp-buttons">
                <button id="attendButton">Eu vou</button>
                <button id="declineButton">N√£o vou</button>
            </div>
            <p>Queridos amigos e familiares, estamos muito felizes em convid√°-los para o nosso Ch√° de Casa Nova!

                O churrasco ser√° por nossa conta, pedimos que tragam seu cooler, sua bebida favorita e caprichem no look de piscina!
            </p>

            <p> Caso queira nos prestigiar com algum presente, abaixo voc√™ pode escolher algo que deseja levar e vincular ao seu telefone</p>
        </div>
    </section>
    <main>


        <h5 style="text-align: center;font-size: 0.6em;">Clique e vincule os produtos que voc√™ deseja levar ao seu telefone!</h5>
        <section class="product-list">
            <div class="product-item" data-id="1">
                <img src="images/batedeira.png" alt="Batedeira Branca">
                <h2>Batedeira Branca</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="2">
                <img src="images/liquidificador.png" alt="Liquidificador Branco">
                <h2>Liquidificador Branco</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="1000">
                <img src="images/pote-2.png" alt="Pote de Bambu 250ml">
                <h2>Pote de Bambu 250ml</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="3">
                <img src="images/multiprocessador.png" alt="Multiprocessador Branco">
                <h2>Multiprocessador Branco</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="4">
                <img src="images/mixer.png" alt="Mixer Branco">
                <h2>Mixer Branco</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="5">
                <img src="images/espremedor.png" alt="Espremedor Branco">
                <h2>Espremedor Branco</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="6">
                <img src="images/assadeira.png" alt="Assadeira">
                <h2>Travessa de Forno</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="7">
                <img src="images/forma-pudim.png" alt="Travessa Pudim de Forno">
                <h2>Travessa Pudim de Forno</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="8">
                <img src="images/jarra.png" alt="Jarra de Vidro 2L">
                <h2>Jarra de Vidro 2L</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="9">
                <img src="images/escorredor-macarrao.png" alt="Escorredor Macarrao">
                <h2>Escorredor Macarrao</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="10">
                <img src="images/rodo.png" alt="Rodo Branco em Bambu">
                <h2>Rodo Branco em Bambu</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="11">
                <img src="images/vassoura.png" alt="Vassoura e p√° Branco em Bambu">
                <h2>Vassoura e p√° Branco em Bambu</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="12">
                <img src="images/rodinho.png" alt="Rodinho Branco em Bambu">
                <h2>Rodinho Branco em Bambu</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="13">
                <img src="images/cesto.png" alt="Cesto em Bambu">
                <h2>Cesto em Bambu</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="14">
                <img src="images/pote.png" alt="Pote de Bambu 1L">
                <h2>Pote de Bambu 1L</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="15">
                <img src="images/gelo-redondo.png" alt="Forma de Gelo Redondo">
                <h2>Forma de Gelo Redondo</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="16">
                <img src="images/gelo-quadrado.png" alt="Forma de Gelo Quadrado">
                <h2>Forma de Gelo Quadrado</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="17">
                <img src="images/toalha-rosto.png" alt="Toalhas de Rosto Branco">
                <h2>Toalhas de Rosto Branco</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="18">
                <img src="images/travesseiro.png" alt="2 Travesseiros Nasa">
                <h2>2 Travesseiros Nasa</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="19">
                <img src="images/manta.png" alt="Manta Fleece Branca">
                <h2>Manta Fleece Branca</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="20">
                <img src="images/assadeira-bolo.png" alt="Assadeira Bolo">
                <h2>Assadeira Bolo</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="21">
                <img src="images/lixeira.png" alt="Lixeira Branca">
                <h2>Lixeira Branca 1</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="22">
                <img src="images/lixeira.png" alt="Lixeira Branca">
                <h2>Lixeira Branca 2</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="23">
                <img src="images/lixeira.png" alt="Lixeira Branca">
                <h2>Lixeira Branca 3</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="24">
                <img src="images/abafador-para-cozinha.png" alt="Abafador para Cozinha">
                <h2>Abafador para Cozinha</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="25">
                <img src="images/organizador.png" alt="Organizador">
                <h2>Organizador Acrilico</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="26">
                <img src="images/colher-sorvete.png" alt="Colher de Sorvete">
                <h2>Colher de Sorvete</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="27">
                <img src="images/conchas.png" alt="Conchas">
                <h2>Conchas</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="28">
                <img src="images/escorredor-arroz.png" alt="Escorredor de Arroz">
                <h2>Escorredor de Arroz Inox</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="29">
                <img src="images/jogo-toalha.png" alt="Jogo de Toalha">
                <h2>Jogo de Toalha</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="30">
                <img src="images/mantegueira.png" alt="Mantegueira">
                <h2>Mantegueira Francesa</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="31">
                <img src="images/mopi.png" alt="Mopi">
                <h2>Mopi</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="32">
                <img src="images/pegador-macarrao.png" alt="Pegador de Macarr√£o">
                <h2>Pegador de Macarr√£o</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="33">
                <img src="images/toalha-azul-marinho.png" alt="Toalha Azul Marinho">
                <h2>Toalha Azul Marinho</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="34">
                <img src="images/toalha-azul.png" alt="Toalha Azul">
                <h2>Toalha Azul</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="35">
                <img src="images/toalha-branca.png" alt="Toalha Branca">
                <h2>Toalha Branca</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="36">
                <img src="images/toalha-rosa.png" alt="Toalha Rosa">
                <h2>Toalha Rosa</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="37">
                <img src="images/panos-de-prato.png" alt="Panos de prato">
                <h2>Panos de prato</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="38">
                <img src="images/sanduicheira.png" alt="Sanduicheira Cadence Dream">
                <h2>Sanduicheira Cadence Dream</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="39">
                <img src="images/kit-lavabo.png" alt="Kit Lavabo Ros√©">
                <h2>Kit Lavabo Ros√© 1</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="40">
                <img src="images/kit-lavabo.png" alt="Kit Lavabo Ros√©">
                <h2>Kit Lavabo Ros√© 2</h2>
                <button class="link-button">Vincular</button>
            </div>

            <div class="product-item" data-id="41">
                <img src="images/kit-lavabo.png" alt="Kit Lavabo Ros√©">
                <h2>Kit Lavabo Ros√© 3</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="42">
                <img src="images/jogo-lencol.png" alt="Jogo Len√ßol Branco">
                <h2>Jogo Len√ßol Branco Queen</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="43">
                <img src="images/jogo-lencol.png" alt="Jogo Len√ßol Branco">
                <h2>Jogo Len√ßol Branco Queen</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="44">
                <img src="images/jogo-lencol.png" alt="Jogo Len√ßol Branco">
                <h2>Jogo Len√ßol Branco Queen</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="45">
                <img src="images/jogo-lencol.png" alt="Jogo Len√ßol Branco">
                <h2>Jogo Len√ßol Branco Queen</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="46">
                <img src="images/luva.png" alt="Luva">
                <h2>Luva Termica</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="47">
                <img src="images/garrafa-cafe.png" alt="Garrafa de Caf√© Branca">
                <h2>Garrafa de Caf√© Branca</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="48">
                <img src="images/medidor.png" alt="Copo Medidor">
                <h2>Copo Medidor</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="49">
                <img src="images/descanso-panela.png" alt="Descanso de Panela">
                <h2>Descanso de Panela</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="50">
                <img src="images/colher-renascenca.png" alt="Colher de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Colheres de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="51">
                <img src="images/garfo-renascenca.png" alt="Garfo de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Garfos de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="52">
                <img src="images/faca-renascenca.png" alt="Faca de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Facas de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="53">
                <img src="images/colher-renascenca.png" alt="Colher de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Colheres de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="54">
                <img src="images/garfo-renascenca.png" alt="Garfo de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Garfos de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="55">
                <img src="images/faca-renascenca.png" alt="Faca de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Facas de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="56">
                <img src="images/colher-renascenca.png" alt="Colher de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Colheres de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="57">
                <img src="images/garfo-renascenca.png" alt="Garfo de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Garfos de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="58">
                <img src="images/faca-renascenca.png" alt="Faca de Mesa *Tramontina Renascen√ßa*">
                <h2>2 Facas de Mesa *Tramontina Renascen√ßa*</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="59">
                <img src="images/boleira.png" alt="Boleira de Vidro">
                <h2>Boleira de Vidro</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="60">
                <img src="images/fruteira.png" alt="Fruteira de Madeira">
                <h2>Fruteira de Madeira</h2>
                <button class="link-button">Vincular</button>
            </div>
            <div class="product-item" data-id="61">
                <img src="images/porta-escova.png" alt="Porta Escova">
                <h2>Porta Escova</h2>
                <button class="link-button">Vincular</button>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-block-1">
            <p>Obrigada pela presen√ßa e carinho! üíï</p>
        </div>
        <div class="footer-block-2">
            <button id="desvincular-button">Desvincular Produto</button>
        </div>      
    </footer>

    <div id="vincular-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Vincular Produto</h2>
            <center><input type="text" class="texto-input" id="telefone" name="telefone" placeholder="Digite seu telefone" required></center>
            <button id="confirm-vincular">Vincular</button>
        </div>
    </div>
    <div id="desvincular-modal" style="display:none;">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Desvincular Produtos</h2>
            <h5>Todos os produtos vinculados ao seu telefone ir√£o ser removidos!</h5>
            <center><input type="text" class="texto-input" id="desvincular-telefone" placeholder="Digite seu telefone"></center>
            <button id="confirm-desvincular">Desvincular</button>
        </div>
    </div>
    <div id="euvou-modal" style="display:none;">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Confirmar</h2>
            <center><input type="text" class="texto-input" id="euvou-nome" placeholder="Digite seu nome" required></center>
            <center><input type="text" class="texto-input" id="euvou-telefone" placeholder="Digite seu telefone" required></center>
            <button id="confirm-euvou">Eu vou :)</button>
        </div>
    </div>
    <div id="naovou-modal" style="display:none;">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Confirmar</h2>
            <center><input type="text" class="texto-input" id="naovou-nome" placeholder="Digite seu nome" required></center>
            <center><input type="text" class="texto-input" id="naovou-telefone" placeholder="Digite seu telefone" required></center>
            <button id="confirm-naovou">N√£o vou :(</button>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            await applyProductData();

            const modal = document.getElementById('vincular-modal');
            const closeButton = document.querySelector('.close-button');
            const confirmButton = document.getElementById('confirm-vincular');
            const telefoneInput = document.getElementById('telefone');
            let selectedProduct = null;

            const desvincularButton = document.getElementById('desvincular-button');
            const desvincularModal = document.getElementById('desvincular-modal');
            const desvincularCloseButton = desvincularModal.querySelector('.close-button');
            const desvincularConfirmButton = document.getElementById('confirm-desvincular');
            const desvincularTelefoneInput = document.getElementById('desvincular-telefone');

            const euvouModal = document.getElementById('euvou-modal');
            const attendButton = document.getElementById('attendButton');
            const attendConfirmButton = document.getElementById('confirm-euvou');
            const euvouTelefoneInput = document.getElementById('euvou-telefone');
            const euvouNomeInput = document.getElementById('euvou-nome');
            const attendCloseButton = euvouModal.querySelector('.close-button');

            const naovouModal = document.getElementById('naovou-modal');
            const declineButton = document.getElementById('declineButton');
            const declineCloseButton = naovouModal.querySelector('.close-button');
            const declineConfirmButton = document.getElementById('confirm-naovou');
            const naovouTelefoneInput = document.getElementById('naovou-telefone');
            const naovouNomeInput = document.getElementById('naovou-nome');

            

            document.querySelectorAll('.link-button').forEach(button => {
                button.addEventListener('click', function () {
                    selectedProduct = parseInt(this.closest('.product-item').getAttribute('data-id'));
                    modal.style.display = 'block';
                });
                button.addEventListener('touchend', function () {
                    selectedProduct = parseInt(this.closest('.product-item').getAttribute('data-id'));
                    modal.style.display = 'block';
                });
            });

            closeButton.addEventListener('click', function () {
                modal.style.display = 'none';
                telefoneInput.value = '';
            });
            desvincularCloseButton.addEventListener('click', function () {
                desvincularModal.style.display = 'none';
                desvincularTelefoneInput.value = '';
            });
            attendCloseButton.addEventListener('click', function () {
                euvouModal.style.display = 'none';
                euvouTelefoneInput.value = '';
                euvouNomeInput.value = '';
            });
            declineCloseButton.addEventListener('click', function () {
                naovouModal.style.display = 'none';
                naovouTelefoneInput.value = '';
                naovouNomeInput.value = '';
            });

            telefoneInput.addEventListener('input', function () {
                const telefone = telefoneInput.value;
                telefoneInput.value = telefone.replace(/[^\d()-]/g, '').replace(/^(\d{2})(\d)/g, '($1)$2').replace(/(\d{5})(\d)/, '$1-$2').slice(0, 14);

                if (telefoneInput.value.length < 8) {
                    telefoneInput.setCustomValidity("O telefone deve ter pelo menos 8 d√≠gitos.");
                } else {
                    telefoneInput.setCustomValidity("");
                }
            });

            confirmButton.addEventListener('click', async function () {
                const telefone = telefoneInput.value.replace(/[^0-9]/g, '');;

                if (telefone.length > 7 && telefone.length <= 11) {

                    const products = await loadProductData();
                    let product = products.find(p => p.Id === selectedProduct);
                    if (product && product.Vinculado) {
                        modal.style.display = 'none';
                        alert("Produto j√° vinculado.");
                    }
                    else {
                        product = {};
                        product.Id = selectedProduct;
                        product.Telefone = telefone;
                        product.Vinculado = true;

                        var response = await saveProductData(product);
                        modal.style.display = 'none';
                        if (!response || response.status > 299) {
                            alert("N√£o foi possivel vincular.");
                        }
                        else {
                            alert("Vinculado com sucesso!");
                            await applyProductData();
                        }
                    }

                } else {
                    alert("Por favor, insira um telefone v√°lido com 7 a 11 d√≠gitos.");
                }
                telefoneInput.value = '';
            });

            
            attendButton.addEventListener('click', function () {
                euvouModal.style.display = 'block';
            });
            declineButton.addEventListener('click', function () {
                naovouModal.style.display = 'block';
            });

            attendConfirmButton.addEventListener('click', async function () {
                const telefone = euvouTelefoneInput.value.replace(/[^0-9]/g, '');;
                const nome = euvouNomeInput.value;

                if (telefone.length > 7 && telefone.length <= 11) 
                {
                    person = {};
                    person.Telefone = telefone;
                    person.Nome = nome;

                    var response = await savePersonData(person);
                    var deleteP = await deleteWontGoPeopleData(telefone);
                    if (!response || response.status > 299) 
                    {
                        alert("Voc√™ j√° confirmou 1 pessoa usando este telefone.");
                    }
                    else 
                    {
                        alert("Obrigado por confirmar!");  
                    }
                    euvouModal.style.display = 'none';
                } 
                else 
                {
                    alert("Por favor, insira um telefone v√°lido com 7 a 11 d√≠gitos.");
                }

                euvouTelefoneInput.value = '';
                euvouNomeInput.value = '';
            });

            declineConfirmButton.addEventListener('click', async function () {
                const telefone = naovouTelefoneInput.value.replace(/[^0-9]/g, '');;
                const nome = naovouNomeInput.value;

                if (telefone.length > 7 && telefone.length <= 11) 
                {
                    person = {};
                    person.Telefone = telefone;
                    person.Nome = nome;

                    var deletePerson = await deletePeopleData(telefone);
                    var response = await saveWontGoPersonData(person);
                    naovouModal.style.display = 'none';
                    alert("Obrigado por confirmar!");                  

                } 
                else 
                {
                    alert("Por favor, insira um telefone v√°lido com 7 a 11 d√≠gitos.");
                }

                naovouTelefoneInput.value = '';
                naovouNomeInput.value = ';'
            });

            euvouTelefoneInput.addEventListener('input', function () {
                const telefone = euvouTelefoneInput.value;

                euvouTelefoneInput.value = telefone.replace(/[^\d()-]/g, '').replace(/^(\d{2})(\d)/g, '($1)$2').replace(/(\d{5})(\d)/, '$1-$2').slice(0, 14);

                if (euvouTelefoneInput.value.length < 8) {
                    euvouTelefoneInput.setCustomValidity("O telefone deve ter pelo menos 8 d√≠gitos.");
                } else {
                    euvouTelefoneInput.setCustomValidity("");
                }
            });

            naovouTelefoneInput.addEventListener('input', function () {
                const telefone = naovouTelefoneInput.value;

                naovouTelefoneInput.value = telefone.replace(/[^\d()-]/g, '').replace(/^(\d{2})(\d)/g, '($1)$2').replace(/(\d{5})(\d)/, '$1-$2').slice(0, 14);

                if (naovouTelefoneInput.value.length < 8) {
                    naovouTelefoneInput.setCustomValidity("O telefone deve ter pelo menos 8 d√≠gitos.");
                } else {
                    naovouTelefoneInput.setCustomValidity("");
                }
            });

            desvincularTelefoneInput.addEventListener('input', function () {
                const telefone = desvincularTelefoneInput.value;

                desvincularTelefoneInput.value = telefone.replace(/[^\d()-]/g, '').replace(/^(\d{2})(\d)/g, '($1)$2').replace(/(\d{5})(\d)/, '$1-$2').slice(0, 14);

                if (desvincularTelefoneInput.value.length < 8) {
                    desvincularTelefoneInput.setCustomValidity("O telefone deve ter pelo menos 8 d√≠gitos.");
                } else {
                    desvincularTelefoneInput.setCustomValidity("");
                }
            });

            desvincularButton.addEventListener('click', function () {
                desvincularModal.style.display = 'block';
            });

            desvincularConfirmButton.addEventListener('click', async function () {
                const telefone = desvincularTelefoneInput.value.replace(/[^0-9]/g, '');;

                if (telefone.length > 7 && telefone.length <= 11) {
                    const products = await loadProductData();
                    const product = products.find(p => p.Telefone === telefone);
                    if (product && product.Vinculado) {
                        var response = await deleteProductData(telefone);
                        desvincularModal.style.display = 'none';
                        if (!response || response.status > 299) {
                            alert("N√£o foi possivel desvincular.");
                        }
                        else {
                            alert("Desvinculado com sucesso!");
                        }
                    }
                    else {
                        alert("Nenhum produto encontrado para o telefone informado.");
                    }

                } else {
                    alert("Por favor, insira um telefone v√°lido com 7 a 11 d√≠gitos.");
                }
                await applyProductData();
                desvincularTelefoneInput.value = '';
            });

            window.addEventListener('click', function (event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    telefoneInput.value = '';
                }

                if (event.target === desvincularModal) {
                    desvincularModal.style.display = 'none';
                    desvincularTelefoneInput.value = '';
                }
            });

            async function loadProductData() {
                const response = await fetch('https://api.izaoejhow.com.br/api/products')
                return response.json();
            }

            async function saveProductData(data) {
                const response = await fetch('https://api.izaoejhow.com.br/api/products', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                return response;
            }

            async function savePersonData(data) {
                const response = await fetch('https://api.izaoejhow.com.br/api/people', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                return response;
            }

            async function deletePeopleData(tel) {
                const response = await fetch(`https://api.izaoejhow.com.br/api/people?telefone=${tel}`, { method: 'DELETE' });

                return response;
            }

            async function deleteWontGoPeopleData(tel) {
                const response = await fetch(`https://api.izaoejhow.com.br/api/people/wontgo?telefone=${tel}`, { method: 'DELETE' });

                return response;
            }

            async function saveWontGoPersonData(data) {
                const response = await fetch('https://api.izaoejhow.com.br/api/people/wontgo', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                return response;
            }

            async function deleteProductData(tel) {
                const response = await fetch(`https://api.izaoejhow.com.br/api/products?telefone=${tel}`, { method: 'DELETE' });

                return response;
            }

            async function applyProductData() {
                const products = await loadProductData();
                document.querySelectorAll('.product-item').forEach(item => {
                    const productId = parseInt(item.getAttribute('data-id'));
                    const product = products.find(p => p.Id === productId);

                    if (product && product.Vinculado) {
                        item.classList.add('vinculado');
                    } else {
                        item.classList.remove('vinculado');
                    }
                });
            }
        });
    </script>
</body>
</html>